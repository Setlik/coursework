import pandas as pd
import pytest


@pytest.fixture
def sample_data():
    """Фикстура для создания тестового DataFrame."""
    data = {
        'Дата платежа': [
            '2023-01-01', '2023-01-15', '2023-02-01', '2023-02-15', '2023-03-01'
        ],
        'Категория': [
            'Супермаркеты', 'Супермаркеты', 'Переводы', 'Переводы', 'Супермаркеты'
        ],
        'Сумма операции': [100, 200, 300, 400, 500]
    }
    df = pd.DataFrame(data)
    df['Дата платежа'] = pd.to_datetime(df['Дата платежа'])
    return df


@pytest.fixture
def test_transactions():
    data = {
        "Описание": [
            "Я МТС +7 921 11-22-33",
            "Тинькофф Мобайл +7 995 555-55-55",
            "МТС Mobile +7 981 333-44-55",
            "Перевод Валерий А. 1000 рублей",
            "Перевод Сергей З. 500 рублей",
            "Перевод Артем П. 200 рублей",
            None,
            " ",
        ],
        "Категория": [
            "Оплата", "Оплата", "Оплата",
            "Переводы", "Переводы", "Переводы",
            "Неизвестно", "Неизвестно"
        ],
    }
    return pd.DataFrame(data)


@pytest.fixture
def mock_user_settings():
    return {
        "user_currencies": ["USD", "EUR"],
        "user_stocks": ["AAPL", "MSFT"]
    }


@pytest.fixture
def mock_transactions():
    # Создаем DataFrame для тестирования
    data = {
        "Дата операции": ["2021-12-31", "2021-12-31"],
        "Сумма операции": [-160.89, -64.00],
        "Кэшбэк": [3.00, 1.00],
        "Номер карты": ["*7197", "*7197"],
        "Описание": ["Оплата", "Оплата"]
    }
    return pd.DataFrame(data)


@pytest.fixture
def mock_transactions_data():
    return {
        "Сумма операции": [100, 200],
        "Кэшбэк": [5, 10],
        "Номер карты": ["1234 5678 9012 3456", "1234 5678 9012 3456"],
        "Дата операции": ["2021-01-01", "2021-01-02"],
        "Описание": ["Покупка", "Покупка"]
    }
